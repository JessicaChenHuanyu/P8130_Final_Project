---
title: '**P8130 Final Project Report**'
author:
-  "Huanyu Chen, Yifei Liu, Xiaoting Tang, Longyu Zhang"
date: "Dec 17, 2023"
output:
  pdf_document:
    number_section: yes
    extra_dependencies: float
subtitle: '**Mailman School of Public Health at Columbia University**'
header-includes:
- \usepackage{caption}
- \usepackage{makecell}
- \captionsetup[figure]{labelformat=empty}
- \captionsetup[table]{labelformat=empty}
abstract: "(condenses a brief introduction, brief description of methods, and main results into a one-paragraph summary)"
editor_options:
  chunk_output_type: console
---
\thispagestyle{empty}
\newpage
\tableofcontents
\thispagestyle{empty}
\newpage
\setcounter{page}{1}

```{r include=FALSE}
library(dplyr)
library(ggplot2)
library(tidyr)
library(knitr)
library(MASS)
library(glmnet)
set.seed(1)
```

# Introduction


(brief context and background of the problem)

- use predictors to predict Math, Reading, and Writing scores
- determine which factors affect each score


# Methods
(data description and statistical methods)

- data description: This dataset includes three test scores of students at a public school and a variety of personal and socioeconomic factors
- changed the categorical data from words to numbers
- for NAs, take the mean of the column, and replace the NAs with mean value. 
- *a descriptive table with summary statistics for all variables created, but has a rounding problem*
- distribution of the response variable coded in histogram and boxplot
- in diagnostics, all linear
- no transformation needed for all three
- no ouliters showed in plot, but for influential points
- multicollinearity checked. no correlated variables, VIF all small

- two models created for each response. one backward (better compared to forward), one lasso


# Results
```{r eval=FALSE}
# Read and Clean Data
data <- read.csv("./data.csv") |>
  janitor::clean_names() |>
  mutate(
    gender = case_when(
      gender == "male" ~ 0,
      gender == "female" ~ 1,
      ),
    ethnic_group = case_when(
      ethnic_group == "group A" ~ 0,
      ethnic_group == "group B" ~ 1,
      ethnic_group == "group C" ~ 2,
      ethnic_group == "group D" ~ 3,
      ethnic_group == "group E" ~ 4,
      ),
    parent_educ = case_when(
      parent_educ == "some highschool" ~ 0,
      parent_educ == "some college" ~ 1,
      parent_educ == "associate's degree" ~ 2,
      parent_educ == "bachelor's degree" ~ 3,
      parent_educ == "master's degree" ~ 4,
      ),
    lunch_type = case_when(
      lunch_type == "standard" ~ 0,
      lunch_type == "free/reduced" ~ 1,
      ),
    test_prep = case_when(
      test_prep == "none" ~ 0,
      test_prep == "completed" ~ 1,
      ),
    parent_marital_status = case_when(
      parent_marital_status == "married" ~ 0,
      parent_marital_status == "single" ~ 1,
      parent_marital_status == "widowed" ~ 2,
      parent_marital_status == "divorced" ~ 3,
      ),
    practice_sport = case_when(
      practice_sport == "never" ~ 0,
      practice_sport == "sometimes" ~ 1,
      practice_sport == "regularly" ~ 2,
      ),
    is_first_child = case_when(
      is_first_child == "no" ~ 0,
      is_first_child == "yes" ~ 1,
      ),
    transport_means = case_when(
      transport_means == "school_bus" ~ 0,
      transport_means == "private" ~ 1,
      ),
    wkly_study_hours = case_when(
      wkly_study_hours == "< 5" ~ 0,
      wkly_study_hours == "10-May" ~ 1,
      wkly_study_hours == "> 10" ~ 2,
      )
    )


# Deal with NA -- Calculate the column mean (round to integer) and plug it into NA cell
column_means <- round(colMeans(data, na.rm = TRUE), digits = 0)
for (col in names(data)) {
  data[[col]][is.na(data[[col]])] <- column_means[col]
  }

# Another data set for EDA
data_long <- data |>
  pivot_longer(cols = c(math_score, reading_score, writing_score),
               names_to = "test", values_to = "score")
```

# Summary
```{r}
continuous_vars <- data[, c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14)]
summary_df <- data.frame(
Min = sapply(continuous_vars, min, na.rm = TRUE),
Q1 = sapply(continuous_vars, function(x) quantile(x, probs = 0.25, na.rm = TRUE)), Median = sapply(continuous_vars, median, na.rm = TRUE),
Mean = sapply(continuous_vars, mean, na.rm = TRUE),
Q3 = sapply(continuous_vars, function(x) quantile(x, probs = 0.75, na.rm = TRUE)), Max = sapply(continuous_vars, max, na.rm = TRUE)
)
kable(summary_df, caption = "Summary Statistics of Data", digits = 1)
```

- final model for each test score
- analyze between models

# Discussion


# A brief summary on each group member’s contribution (method, data analysis, writing, etc).


Analytical questions (you may only answer some of them but properly addressing more will improve the rate of your report):
1. Using variables 1-11 as the covariates to predict Math, Reading and Writing scores.
2. Which factors (features) affect each test score signficantly? Are there interacting effects?
3. Are the optimal prediction models similar or different across the three test scores? Is it possible to leverage one score as the auxiliary information to learn the model for another score (still its model against variables 1-11) better?


describe your final model and interpret its parameters. 
examine the marginal distributions and pairwise relationships between variables (e.g., nonlinearities)
explore several candidate models, and explain why you selected your model.
be clear about your motivation for carrying out certain analyses. 
Your report should include a table summarizing parameter estimates associated with your final fitted model, characterizing predictor variables.
• Data exploration: descriptive statistics and visualization.
• In your regression model, be watchful for variables that are highly correlated and be selective in the variables you will include in your analysis.
selective interactions between variables.


Grading:
Method and interpretation:
Understand the background and task of the project;
Preprocess of the data;
Proper choice and decision on models’ assumption, specification, diagnostic, selection, comparison, and validation;
Strategies and reasons of your designs and decisions should be included.
Correct and informative interpretation of the results.

Writing and result display:
Well-organized report with professional writing and structuring;
Proper introduction of the method with helpful and informative explanations;
Display the data and analysis results with tables and plots. 
Be concise and avoid displaying redundant or useless results; 
Do not exceed the page limit.

# Conclusions


# References


# Appendix
## Code

```{r ref.label=knitr::all_labels(), echo=TRUE, eval=FALSE}
```
